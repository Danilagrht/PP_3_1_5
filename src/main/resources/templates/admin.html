<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>

    <title>Panel</title>
</head>

<body>

<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <div class="ms-3 m-auto text-white d-flex flex-row">
        user
        <strong>
<!--            <th:block id="getUsernameHeader"></th:block>-->
            <div class="px-1 text-nowrap" id="usernameHeader"></div>
<!--                    th:text="${currentUser.getUsername()}" -->
        </strong>
        with roles:
        <div class="px-1 text-nowrap" id="rolesHeader"></div>
<!--        <th:block th:text="${currentUser.getRolesString()}"></th:block>-->
    </div>
    <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
            <a class="nav-link" href="/logout">Logout</a>
        </li>
    </ul>
</nav>

<div class="container-fluid">
    <div class="row">
        <nav class="col-lg-2 bg-light">
            <div class="sidebar-sticky pt-2">
                <ul class="nav flex-column nav-pills">
                    <li class="nav-item">
                        <button class="nav-link rounded-2 w-100" data-bs-toggle="tab" data-bs-target="#adminPanel" type="button" style="display: none" id="sidebarAdminButton">Admin</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link rounded-2 w-100" data-bs-toggle="tab" data-bs-target="#userPanel" type="button" style="display: none" id="sidebarUserButton">User</button>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="col-sm-10 col-12 bg-body-secondary tab-content">
            <div class="p-3 tab-pane" id="adminPanel">
                <h2>Admin panel</h2>

                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#userTable" href="#" id="userTableTab">Users table</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" data-bs-target="#newUser" href="#" id="newUserTab">New user</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active shadow" id="userTable"
                         style="background-color: #f8f9fa; border: 2px solid #dee2e6; border-radius: .50rem;">
                        <h3 class="ps-3 p-2" style="background-color: #E9ECEF;">All users</h3>
                        <div class="p-3">
                            <table class="table table-borderless table-hover">
                                <thead>
                                <tr class="table-light text-center border-top border-bottom">
                                    <th scope="col">ID</th>
                                    <th scope="col">First Name</th>
                                    <th scope="col">Last Name</th>
                                    <th scope="col">Age</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Role</th>
                                    <th scope="col">Edit</th>
                                    <th scope="col">Delete</th>
                                </tr>
                                </thead>
                                <tbody class="text-center table-light" id="userTableData">
<!--                                    <tr th:each="user : ${users}">-->
<!--                                        <td th:text="${user.getId()}"></td>-->
<!--                                        <td th:text="${user.getFirstName()}"></td>-->
<!--                                        <td th:text="${user.getLastName()}"></td>-->
<!--                                        <td th:text="${user.getAge()}"></td>-->
<!--                                        <td th:text="${user.getEmail()}"></td>-->
<!--                                        <td th:text="${user.getRolesString()}"></td>-->
<!--                                        <td>-->
<!--                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editUserModal"-->
<!--                                                    th:data-id="${user.getId()}"-->
<!--                                                    th:data-firstname="${user.getFirstName()}"-->
<!--                                                    th:data-lastname="${user.getLastName()}"-->
<!--                                                    th:data-age="${user.getAge()}"-->
<!--                                                    th:data-email="${user.getEmail()}"-->
<!--                                                    th:data-username="${user.getUsername()}">-->
<!--                                                Edit-->
<!--                                            </button>-->
<!--                                        </td>-->
<!--                                        <td>-->
<!--                                            <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteUserModal"-->
<!--                                                    th:data-id="${user.getId()}"-->
<!--                                                    th:data-firstname="${user.getFirstName()}"-->
<!--                                                    th:data-lastname="${user.getLastName()}"-->
<!--                                                    th:data-age="${user.getAge()}"-->
<!--                                                    th:data-email="${user.getEmail()}"-->
<!--                                                    th:data-username="${user.getUsername()}">-->
<!--                                                Delete-->
<!--                                            </button>-->
<!--                                        </td>-->
<!--                                    </tr>-->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade show shadow" id="newUser" style="background-color: #f8f9fa; border: 2px solid #dee2e6; border-radius: .50rem;">
                        <h3 class="ps-3 p-2" style="background-color: #E9ECEF;">Add new user</h3>
                        <div class="row justify-content-center">
                            <div class="col-md-5">
                                <form class="p-3">
                                    <div class="mb-3">
                                        <label for="newFirstName" class="form-label fw-bold d-block text-center">First Name</label>
                                        <input type="text" class="form-control" id="newFirstName" placeholder="First Name">
                                    </div>
                                    <div class="mb-3">
                                        <label for="newLastName" class="form-label fw-bold d-block text-center">Last Name</label>
                                        <input type="text" class="form-control" id="newLastName" placeholder="Last Name">
                                    </div>
                                    <div class="mb-3">
                                        <label for="newAge" class="form-label fw-bold d-block text-center">Age</label>
                                        <input type="number" class="form-control" id="newAge" placeholder="Age">
                                    </div>
                                    <div class="mb-3">
                                        <label for="newEmail" class="form-label fw-bold d-block text-center">Email</label>
                                        <input type="text" class="form-control" id="newEmail" placeholder="Email">
                                    </div>
                                    <div class="mb-3">
                                        <label for="newUsername" class="form-label fw-bold d-block text-center">Username</label>
                                        <input type="text" class="form-control" id="newUsername" placeholder="Username">
                                    </div>
                                    <div class="mb-3">
                                        <label for="newPassword" class="form-label fw-bold d-block text-center">Password</label>
                                        <input type="password" class="form-control" id="newPassword" placeholder="Password">
                                    </div>
                                    <div class="mb-3">
                                        <label for="newRole" class="form-label fw-bold d-block text-center">Role</label>
                                        <select class="form-select" id="newRole" multiple size="2">
                                            <option value="ROLE_ADMIN">ADMIN</option>
                                            <option value="ROLE_USER">USER</option>
                                        </select>
                                    </div>
                                    <div class="d-flex justify-content-center">
                                        <button class="btn btn-success h-75 w-50" id="addNewUserSubmit">Add new user</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-3 tab-pane" id="userPanel">
                <h2>User information-page</h2>
                <div class="tab-pane fade show active shadow"
                     style="background-color: #f8f9fa; border: 2px solid #dee2e6; border-radius: .50rem;">
                    <h3 class="ps-3 p-2" style="background-color: #E9ECEF;">About user</h3>
                    <div class="p-3">
                        <table class="table table-borderless table-hover">
                            <thead>
                            <tr class="table-light text-center border-top border-bottom">
                                <th scope="col">ID</th>
                                <th scope="col">First Name</th>
                                <th scope="col">Last Name</th>
                                <th scope="col">Age</th>
                                <th scope="col">Email</th>
                                <th scope="col">Role</th>
                            </tr>
                            </thead>
                            <tbody class="text-center table-light" id="currentUserTableData"></tbody>
<!--                            <tbody class="text-center table-light">-->
<!--                            <tr>-->
<!--                                <td th:text="${currentUser.getId()}"></td>-->
<!--                                <td th:text="${currentUser.getFirstName()}"></td>-->
<!--                                <td th:text="${currentUser.getLastName()}"></td>-->
<!--                                <td th:text="${currentUser.getAge()}"></td>-->
<!--                                <td th:text="${currentUser.getEmail()}"></td>-->
<!--                                <td th:text="${currentUser.getRolesString()}"></td>-->
<!--                            </tr>-->
<!--                            </tbody>-->
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editId" class="form-label fw-bold">ID</label>
                            <input type="text" class="form-control" id="editId" disabled>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editUsername" class="form-label fw-bold">Username</label>
                            <input type="text" class="form-control" id="editUsername">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editFirstName" class="form-label fw-bold">First Name</label>
                            <input type="text" class="form-control" id="editFirstName">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editLastName" class="form-label fw-bold">Last Name</label>
                            <input type="text" class="form-control" id="editLastName">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editAge" class="form-label fw-bold">Age</label>
                            <input type="number" class="form-control" id="editAge">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editEmail" class="form-label fw-bold">Email</label>
                            <input type="text" class="form-control" id="editEmail">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editPassword" class="form-label fw-bold">Password</label>
                            <input type="password" class="form-control" id="editPassword">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="editRole" class="form-label fw-bold">Role</label>
                            <select class="form-select" id="editRole" multiple size="2">
                                <option value="ROLE_ADMIN">ADMIN</option>
                                <option value="ROLE_USER">USER</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="editUserModalSubmit" data-bs-dismiss="modal">Edit</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="deleteUserModal" tabindex="-1" aria-labelledby="deleteUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteUserModalLabel">Edit User</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="deleteId" class="form-label fw-bold">ID</label>
                            <input type="text" class="form-control" id="deleteId" disabled>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="deleteUsername" class="form-label fw-bold">Username</label>
                            <input type="text" class="form-control" id="deleteUsername" disabled>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="deleteFirstName" class="form-label fw-bold">First Name</label>
                            <input type="text" class="form-control" id="deleteFirstName" disabled>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="deleteLastName" class="form-label fw-bold">Last Name</label>
                            <input type="text" class="form-control" id="deleteLastName" disabled>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="deleteAge" class="form-label fw-bold">Age</label>
                            <input type="number" class="form-control" id="deleteAge" disabled>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="deleteEmail" class="form-label fw-bold">Email</label>
                            <input type="text" class="form-control" id="deleteEmail" disabled>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-lg-7 mx-auto d-flex flex-column align-items-center">
                            <label for="deleteRole" class="form-label fw-bold">Role</label>
                            <select class="form-select" id="deleteRole" size="2" disabled>
                                <option value="ROLE_ADMIN">ADMIN</option>
                                <option value="ROLE_USER">USER</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" id="deleteUserModalSubmit" data-bs-dismiss="modal">Delete</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="/js/admin.js"></script>

</body>
</html>